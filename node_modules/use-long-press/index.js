"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("react");var c=(e=>(e.Mouse="mouse",e.Touch="touch",e.Pointer="pointer",e))(c||{}),a=(e=>(e.CancelledByMovement="cancelled-by-movement",e.CancelledByRelease="cancelled-by-release",e.CancelledOutsideElement="cancelled-outside-element",e))(a||{});const j=()=>typeof window=="object"?window?.PointerEvent??null:null,Y=()=>typeof window=="object"?window?.TouchEvent??null:null;function D(e){const{nativeEvent:o}=e,s=Y();return s&&o instanceof s||"touches"in e}function A(e){const o=j();return e.nativeEvent instanceof MouseEvent&&!(o&&e.nativeEvent instanceof o)}function S(e){const{nativeEvent:o}=e;if(!o)return!1;const s=j();return s&&o instanceof s||"pointerId"in o}function R(e){return A(e)||D(e)||S(e)}function B(e){return D(e)?{x:e.touches[0].pageX,y:e.touches[0].pageY}:A(e)||S(e)?{x:e.pageX,y:e.pageY}:null}function q(e){return{target:e.target,currentTarget:e.currentTarget,nativeEvent:e,persist:()=>{}}}function I(e,{threshold:o=400,captureEvent:s=!1,detect:p=c.Pointer,cancelOnMovement:w=!1,cancelOutsideElement:P=!0,filterEvents:g,onStart:T,onMove:y,onFinish:M,onCancel:C}={}){const h=t.useRef(!1),f=t.useRef(!1),U=t.useRef(),l=t.useRef(),m=t.useRef(e),d=t.useRef(null),E=t.useCallback(n=>r=>{f.current||R(r)&&(g!==void 0&&!g(r)||(s&&r.persist(),T?.(r,{context:n}),d.current=B(r),f.current=!0,U.current=r.currentTarget,l.current=setTimeout(()=>{m.current&&(m.current(r,{context:n}),h.current=!0)},o)))},[s,g,T,o]),i=t.useCallback(n=>(r,u)=>{R(r)&&f.current&&(d.current=null,s&&r.persist(),h.current?M?.(r,{context:n}):f.current&&C?.(r,{context:n,reason:u??a.CancelledByRelease}),h.current=!1,f.current=!1,l.current!==void 0&&clearTimeout(l.current))},[s,M,C]),v=t.useCallback(n=>r=>{if(y?.(r,{context:n}),w!==!1&&d.current){const u=B(r);if(u){const b=w===!0?25:w,L={x:Math.abs(u.x-d.current.x),y:Math.abs(u.y-d.current.y)};(L.x>b||L.y>b)&&i(n)(r,a.CancelledByMovement)}}},[i,w,y]),X=t.useCallback(n=>{if(e===null)return{};switch(p){case c.Mouse:{const r={onMouseDown:E(n),onMouseMove:v(n),onMouseUp:i(n)};return P&&(r.onMouseLeave=u=>{i(n)(u,a.CancelledOutsideElement)}),r}case c.Touch:return{onTouchStart:E(n),onTouchMove:v(n),onTouchEnd:i(n)};case c.Pointer:{const r={onPointerDown:E(n),onPointerMove:v(n),onPointerUp:i(n)};return P&&(r.onPointerLeave=u=>i(n)(u,a.CancelledOutsideElement)),r}}},[e,i,P,p,v,E]);return t.useEffect(()=>{if(!window)return;function n(r){const u=q(r);i()(u)}return window.addEventListener("mouseup",n),window.addEventListener("touchend",n),window.addEventListener("pointerup",n),()=>{window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),window.removeEventListener("pointerup",n)}},[i]),t.useEffect(()=>()=>{l.current!==void 0&&clearTimeout(l.current)},[]),t.useEffect(()=>{m.current=e},[e]),X}exports.LongPressCallbackReason=a;exports.LongPressEventType=c;exports.useLongPress=I;
