import { Controller } from '@use-symbology-scanner/core';
import { useMemo, useEffect } from 'react';

const useSymbologyScanner = (handler, config = {}) => {
  const controller = useMemo(() => new Controller(), []);
  controller.applyHandler(handler);
  controller.applyConfig(config);
  useEffect(controller.effect.bind(controller));
  useEffect(() => {
    return controller.clean.bind(controller);
  }, []);
};

export { useSymbologyScanner };
