import {
  require_react
} from "./chunk-ZGRSIX2Q.js";
import {
  __toESM
} from "./chunk-ROME4SDB.js";

// node_modules/use-long-press/index.mjs
var import_react = __toESM(require_react(), 1);
var l = ((e) => (e.Mouse = "mouse", e.Touch = "touch", e.Pointer = "pointer", e))(l || {});
var d = ((e) => (e.CancelledByMovement = "cancelled-by-movement", e.CancelledByRelease = "cancelled-by-release", e.CancelledOutsideElement = "cancelled-outside-element", e))(d || {});
var A = () => typeof window == "object" ? (window == null ? void 0 : window.PointerEvent) ?? null : null;
var z = () => typeof window == "object" ? (window == null ? void 0 : window.TouchEvent) ?? null : null;
function U(e) {
  const { nativeEvent: t } = e, u = z();
  return u && t instanceof u || "touches" in e;
}
function X(e) {
  const t = A();
  return e.nativeEvent instanceof MouseEvent && !(t && e.nativeEvent instanceof t);
}
function Y(e) {
  const { nativeEvent: t } = e;
  if (!t)
    return false;
  const u = A();
  return u && t instanceof u || "pointerId" in t;
}
function R(e) {
  return X(e) || U(e) || Y(e);
}
function j(e) {
  return U(e) ? {
    x: e.touches[0].pageX,
    y: e.touches[0].pageY
  } : X(e) || Y(e) ? {
    x: e.pageX,
    y: e.pageY
  } : null;
}
function G(e) {
  return {
    target: e.target,
    currentTarget: e.currentTarget,
    nativeEvent: e,
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    persist: () => {
    }
  };
}
function J(e, {
  threshold: t = 400,
  captureEvent: u = false,
  detect: y = l.Pointer,
  cancelOnMovement: w = false,
  cancelOutsideElement: v = true,
  filterEvents: p,
  onStart: M,
  onMove: C,
  onFinish: L,
  onCancel: b
} = {}) {
  const P = (0, import_react.useRef)(false), c = (0, import_react.useRef)(false), I = (0, import_react.useRef)(), a = (0, import_react.useRef)(), T = (0, import_react.useRef)(e), f = (0, import_react.useRef)(null), E = (0, import_react.useCallback)(
    (n) => (r) => {
      c.current || R(r) && (p !== void 0 && !p(r) || (u && r.persist(), M == null ? void 0 : M(r, { context: n }), f.current = j(r), c.current = true, I.current = r.currentTarget, a.current = setTimeout(() => {
        T.current && (T.current(r, { context: n }), P.current = true);
      }, t)));
    },
    [u, p, M, t]
  ), i = (0, import_react.useCallback)(
    (n) => (r, o) => {
      R(r) && c.current && (f.current = null, u && r.persist(), P.current ? L == null ? void 0 : L(r, { context: n }) : c.current && (b == null ? void 0 : b(r, { context: n, reason: o ?? d.CancelledByRelease })), P.current = false, c.current = false, a.current !== void 0 && clearTimeout(a.current));
    },
    [u, L, b]
  ), m = (0, import_react.useCallback)(
    (n) => (r) => {
      if (C == null ? void 0 : C(r, { context: n }), w !== false && f.current) {
        const o = j(r);
        if (o) {
          const B = w === true ? 25 : w, D = {
            x: Math.abs(o.x - f.current.x),
            y: Math.abs(o.y - f.current.y)
          };
          (D.x > B || D.y > B) && i(n)(r, d.CancelledByMovement);
        }
      }
    },
    [i, w, C]
  ), q = (0, import_react.useCallback)(
    (n) => {
      if (e === null)
        return {};
      switch (y) {
        case l.Mouse: {
          const r = {
            onMouseDown: E(n),
            onMouseMove: m(n),
            onMouseUp: i(n)
          };
          return v && (r.onMouseLeave = (o) => {
            i(n)(o, d.CancelledOutsideElement);
          }), r;
        }
        case l.Touch:
          return {
            onTouchStart: E(n),
            onTouchMove: m(n),
            onTouchEnd: i(n)
          };
        case l.Pointer: {
          const r = {
            onPointerDown: E(n),
            onPointerMove: m(n),
            onPointerUp: i(n)
          };
          return v && (r.onPointerLeave = (o) => i(n)(o, d.CancelledOutsideElement)), r;
        }
      }
    },
    [e, i, v, y, m, E]
  );
  return (0, import_react.useEffect)(() => {
    if (!window)
      return;
    function n(r) {
      const o = G(r);
      i()(o);
    }
    return window.addEventListener("mouseup", n), window.addEventListener("touchend", n), window.addEventListener("pointerup", n), () => {
      window.removeEventListener("mouseup", n), window.removeEventListener("touchend", n), window.removeEventListener("pointerup", n);
    };
  }, [i]), (0, import_react.useEffect)(
    () => () => {
      a.current !== void 0 && clearTimeout(a.current);
    },
    []
  ), (0, import_react.useEffect)(() => {
    T.current = e;
  }, [e]), q;
}
export {
  d as LongPressCallbackReason,
  l as LongPressEventType,
  J as useLongPress
};
//# sourceMappingURL=use-long-press.js.map
